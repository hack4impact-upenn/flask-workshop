<html>
<head>
  <!-- Import JQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
<h1>ALL THE NEWBIES!!!</h1>

<!-- Simple Jinja template for displaying newbie data-->
<table>
    <thead>
        <tr>
            <th>First name</th>
            <th>Last name</th>
            <th>Year</th>
        </tr>
    </thead>
    <tbody>
      <!--newbies is passed to this template in views.py-->
      <!--using a for loop since we want to display all newbies :) -->
    {% for u in newbies %}
      <tr>
        <td>{{ u.first_name }}</td>
        <td>{{ u.last_name }}</td>
        <td>{{ u.year }}</td>
        <td>
          <!-- Clicking on the button calls the deleteNewbie Javascript function -->
          <button onclick="deleteNewbie({{ u.id }})">Delete</button>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<a href="/newbies/add">Add a newbie here!</a>

<script>
function deleteNewbie(newbie_id) {
  // Make a DELETE request to the following URL
  $.ajax({
      url: `/newbies/${newbie_id}`,
      type: 'DELETE',
      success: function(response) {
      // Print the response in the browser console
      console.log(response)
      // Refresh the page
      document.location.reload()
    },
  })
}
</script>
</body>
</html>
